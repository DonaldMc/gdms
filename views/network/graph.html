{{left_sidebar_enabled,right_sidebar_enabled=False,False}}
{{extend 'layout.html'}}
{{from gluon import XML}}
{{from jointjs2py import portangle,addobjects,newmetlink,initgraph}}
{{from ndsfunctions import truncquest}}


    <div id="graph">
        <h1> The graph area</h1>
    <div id="toolbox" class >
      <input type="file" id="hidden-file-upload"><input id="upload-input" type="image" title="upload graph" src="/nds/static/images/upload-icon.png" alt="upload graph"> <input type="image" id="download-input" title="download graph" src="/nds/static/images/download-icon.png" alt="download graph"> <input type="image" id="delete-graph" title="delete graph" src="/nds/static/images/trash-icon.png" alt="delete graph">
    </div>
    </div>

    <script>
        /*{"edges":*/

        /*var d3nodes  = [{"id":2,"title":"can I edit","x":230,"y":494},{"id":3,"title":"test","x":436,"y":309}]*/
        var d3nodes = {{=XML(d3nodes)}};
        var d3edges = [];
        /*var d3edges = [{"source":2,"target":3}]*/
        var d3edges = [{"source":13,"target":14}]

        d3edges.forEach(function(e, i){
              d3edges[i] = {source: d3nodes.filter(function(n){return n.id == e.source;})[0],
                          target: d3nodes.filter(function(n){return n.id == e.target;})[0]}});


    </script>
        
    <script src="//d3js.org/d3.v3.js" charset="utf-8"></script>
    <script src="//cdn.jsdelivr.net/filesaver.js/0.1/FileSaver.min.js"></script>
    <script src="/nds/static/js/graph-creator.js"></script>



